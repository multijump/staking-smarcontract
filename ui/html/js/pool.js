"use strict";function _slicedToArray(o,e){return _arrayWithHoles(o)||_iterableToArrayLimit(o,e)||_unsupportedIterableToArray(o,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(o,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(o)){var t=[],n=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(n=(a=l.next()).done)&&(t.push(a.value),!e||t.length!==e);n=!0);}catch(o){r=!0,i=o}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return t}}function _arrayWithHoles(o){if(Array.isArray(o))return o}function ownKeys(e,o){var t,n=Object.keys(e);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(e),o&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,t)),n}function _objectSpread(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?ownKeys(Object(t),!0).forEach(function(o){_defineProperty(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}function _defineProperty(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function _toConsumableArray(o){return _arrayWithoutHoles(o)||_iterableToArray(o)||_unsupportedIterableToArray(o)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,e){if(o){if("string"==typeof o)return _arrayLikeToArray(o,e);var t=Object.prototype.toString.call(o).slice(8,-1);return"Object"===t&&o.constructor&&(t=o.constructor.name),"Map"===t||"Set"===t?Array.from(o):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(o,e):void 0}}function _iterableToArray(o){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(o))return Array.from(o)}function _arrayWithoutHoles(o){if(Array.isArray(o))return _arrayLikeToArray(o)}function _arrayLikeToArray(o,e){(null==e||e>o.length)&&(e=o.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=o[t];return n}var countingTo=0;function resetPools(){console.log("Run reset pools"),window.variables.PAIR_TOKEN_CONTRACTS={},window.variables.pool={},window.variables.pool.PAIRS=[],initPool()}function initPool(){initData(function(o,e){var t=window.variables,n=t.PAIR_TOKEN_CONTRACTS,r=void 0===n?{}:n,i=t.pool.PAIRS,a=void 0===i?[]:i;window.variables.PAIR_TOKEN_CONTRACTS=_objectSpread(_objectSpread({},r),e),window.variables.pool.PAIRS=[].concat(_toConsumableArray(a),_toConsumableArray(o)),window.variables.ACCOUNT&&(updatePool(),countingTo=0)})}function updatePool(){var o=window.variables.ACCOUNT;window.variables.pool.PAIRS&&o?initUserData(function(o){renderPools(window.variables.pool.PAIRS,o)}):renderPools([],[])}function initData(n){var o=window.variables.pool.PAIRS,e=void 0===o?[]:o;Promise.all([getFullPairs(e.length)]).then(function(o){var e=_slicedToArray(o,1)[0],t=Object.fromEntries(e.map(function(o){return[o.id,getPairTokenContract(o.id)]}));n(e,t)}).catch(console.log)}function initUserData(t){var o=window.variables,e=o.ACCOUNT,n=o.pool.PAIRS;Promise.all([e&&n?getBalances(e,n):Promise.resolve([])]).then(function(o){var e=_slicedToArray(o,1)[0];window.variables.pool.BALANCES=e,t(e)}).catch(console.log)}function renderPools(o,f){var m;0<o.length?(m=0,o.forEach(function(e){var o,t,n,r,i,a,l,c,s,d,p=f[e.id].balance,u=e.token0,v=e.token1,y=e.reserve0,b=e.reserve1,w=e.totalSupply;0<new BigNumber(p).toNumber()&&(r=(null===(o=(n=window.variables.TOKEN_LIST[window.variables.NETWORK]).find(function(o){return o.address.toLowerCase()===e.token0.id.toLowerCase()}))||void 0===o?void 0:o.logoURI)||"images/defaultAsset.svg",i=(null===(t=n.find(function(o){return o.address.toLowerCase()===e.token1.id.toLowerCase()}))||void 0===t?void 0:t.logoURI)||"images/defaultAsset.svg",a=p/w,l=new BigNumber(100*a).toFormat(2),c=new BigNumber(y*a).toFormat(8),s=new BigNumber(b*a).toFormat(8),d=$(".pool__descr").find("#".concat(e.id)),0==$(".pool__descr").find("div").length&&$(".pool__descr").empty(),d.length?(d.find("pool-accordion--body-text-item-value.balance").text(p),d.find("pool-accordion--body-text-item-value.pool-share-percent").text("".concat(l,"%")),d.find("pool-accordion--body-text-item-value.pooled-token0 span").text("".concat(c,"%")),d.find("pool-accordion--body-text-item-value.pooled-token1 span").text("".concat(s,"%"))):$(".pool__descr").append('\n            <div id="'.concat(e.id,'" class="pool-accordion"> \n              <div class="pool-accordion--title"> \n                <div class="pool-accordion--title-pair-info">\n                  <div class="pool-accordion--title-pair-info-images">\n                    <img src="').concat(r,'">\n                    <img src="').concat(i,'">\n                  </div>\n                  <div class="pool-accordion--title-pair-info-text">').concat(u.symbol," / ").concat(v.symbol,'</div>\n                </div>\n                <div class="pool-accordion--title-button">\n                  <button class="pool-accordion-expander closed" data-id="').concat(u.symbol,"-").concat(v.symbol,'">\n                    Manage\n                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 10px;">\n                      <polyline points="6 9 12 15 18 9"></polyline>\n                    </svg>\n                  </button>\n                </div>\n              </div>\n              <div class="pool-accordion--body" id="').concat(u.symbol,"-").concat(v.symbol,'" style="display:none;"> \n                <div class="pool-accordion--body-text-item"> \n                  <div class="pool-accordion--body-text-item-descr">Your total pool tokens:</div>\n                  <div class="pool-accordion--body-text-item-value balance">').concat(p,'</div>\n                </div>\n                <div class="pool-accordion--body-text-item"> \n                  <div class="pool-accordion--body-text-item-descr">Pooled ').concat(u.symbol,':</div>\n                  <div class="pool-accordion--body-text-item-value pooled-token0">\n                    <span>').concat(c,'</span>\n                    <img src="').concat(r,'">\n                  </div>\n                </div>\n                <div class="pool-accordion--body-text-item"> \n                  <div class="pool-accordion--body-text-item-descr">Pooled ').concat(v.symbol,':</div>\n                  <div class="pool-accordion--body-text-item-value pooled-token1">\n                    <span>').concat(s,'</span>\n                    <img src="').concat(i,'">\n                  </div>\n                </div>\n                <div class="pool-accordion--body-text-item"> \n                  <div class="pool-accordion--body-text-item-descr">Your pool share:</div>\n                  <div class="pool-accordion--body-text-item-value pool-share-percent">').concat(l,'%</div>\n                </div>\n                <a href="https://info.swipe.org/pairs/').concat(e.id,'" target="_blink" class="pool-accordion--body-link-item">\n                  View accrued fees and analytics\n                  <span style="font-size: 11px;">â†—</span>\n                </a>\n                <div class="pool-accordion--body-button-item">\n                  <a class="btn" href="add-liquidity?type=add&inputCurrency=').concat(u.id,"&outputCurrency=").concat(v.id,'">Add</a>\n                  <a class="btn" href="remove-liquidity?token0=').concat(u.id,"&token1=").concat(v.id,'">Remove</a>\n                </div>\n              </div>\n            </div>\n          ')),m++)}),m||$(".pool__descr").text("You don't have any liquidity pools")):$(".pool__descr").text("Connect a wallet to view your liquidity.")}window.onload=function(){window.variables.pool={},window.events.resetPools=resetPools,window.triggers.networkChanged=[].concat(_toConsumableArray(window.triggers.networkChanged||[]),["resetPools"]),$(document).on("click",".pool-accordion-expander",function(o){o.preventDefault();var e=$(this).attr("data-id");$(this).empty(),this.classList.contains("closed")?$(this).append('\n        Manage\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 10px;">\n          <polyline points="18 15 12 9 6 15"></polyline>\n        </svg>\n      '):$(this).append('\n        Manage\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 10px;">\n          <polyline points="6 9 12 15 18 9"></polyline>\n        </svg>\n      '),this.classList.toggle("closed"),$("#".concat(e)).slideToggle("slow")}),setInterval(function(){window.variables.ACCOUNT&&(countingTo+=1,$(".pool__about .seconds").text(countingTo),60===countingTo&&initPool())},1e3)};